.. sectionauthor:: Дмитрий Барышников <dmitry.baryshnikov@nextgis.ru>

.. _ngfv_admin:

Административный интерфейс
===========================


Что это такое
------------------------

Комплекс состоит из трёх программ: серверное програмное обеспечение, мобильного приложения "Лесной инспектор" и мобильного приложения "Сохрани лес". На этой странице описаны операции с серверным програмным обеспечением. Оно хранит данные, и обменивается ими с мобильными приложениями.

Для администрирования вам потребуется:

* URL сервера
* Логин и пароль

Описание слоёв на сервере
----------------------------------------

* Геоданные
* * Лесоделение - эти данные передаются в приложение "Лесной инспектор".
* * Общедоступное
* * * Сообщения граждан - данные поступающие из приложения "Сохрани лес".
* * * Точки лесонарушений - ?
* * Ограниченое - эти данные передаются в приложение "Лесной инспектор".



Операция добавления нового инспектора
-----------------------------------------

Для этого нужно добавить пользователя в базу серверного ПО, и добавить ему географический полигон работы.

#. Зайдите в раздел Панель управления --> Пользователи --> Список
#. Проверьте, нет ли в списке уже этого пользователя.
#. Нажмите Пользователи --> Создать
#. Заполните поля, придумайте логин и пароль для этого пользователя, укажите группу Инспекторы. Запишите логин и пароль, нажмите кнопку Создать. 

#. С главной страницы зайдите Сервисы --> WFS сервис --> WFS сервис. На экране выведется адрес, вроде http://176.9.38.120/fv/api/resource/10/wfs. Скопируйте этот адрес в буфер.
#. Запустите программу NextGIS QGIS. 
#. Для добавления базовой карты: Нажмите Интернет --> QuickMapServices. Выберите подложку, например OSM Mapnik.

.. note:: если под текущую операционную систему нет сборки NextGIS QGIS - воспользуйтесь программой QGIS, и установите в ней плагин QuickMapServices.

8. Нажмите Слой --> Добавить слой --> Добавить слой WFS.
9. В открывшемся окне "Добавление слоя WFS" нажмите "Создать". В открывшемся окне введите: Название - Пользователи системы Лесной инспектор, адреc - URL из шага 5. Логин и пароль - те, под которым вы работаете в серверном ПО. (см. так же http://docs.nextgis.ru/docs_ngqgis/source/map.html#wfs)
10. Затем нажмите Подключится, в списке появятся слои, выберите слой "Инспекторы", нажмите кнопку "Добавить", 
11. Выделите слой "Инспекторы" в списке слоёв, включите режим редактирования, найдите на панели кнопку "Добавить объект". Нарисуйте на карте область, нажмите правую кнопку мыши.
12. В открывшемся окне укажите login: логин нового инспектора, pass_id - пароль нового инспектора, user - имя инспектора. Эти данные должны совпадать с параметрами пользователя, которые вы добавили в пункте 4
13. Нажмите Ok, затем - Сохратить правки слоя, или Выйти из режима редактированияю.

Добавление инспектора закончено.


 

Операция увольнения инспектора
-----------------------------------------

Для этого нужно отключить пользователя в административном интерфейсе серверного ПО.

#. Зайдите в раздел Панель управления --> Пользователи --> Список
#. Найдите пользователя в списке. Нажмите на его кнопку редактирования
#. В открывшемся окне включите поле Отключён


Операция отключения неадекватного пользователя
------------------------------------------------

Для этого нужно отключить пользователя в административном интерфейсе серверного ПО.

#. Зайдите в раздел Панель управления --> Пользователи --> Список
#. Найдите пользователя в списке. Нажмите на его кнопку редактирования
#. В открывшемся окне включите поле Отключён



Операция проверки работоспособности 
------------------------------------------------

#. Зайдите в слой Геоданные --> Ограниченные --> Документы. Откройте Таблицу Атрибутов.
#. В таблице атрибутов вы должны видеть те данные, которые отправляются из приложения "Лесной инспектор".

